# Серверные архитектурные паттерны

## Содержание
1. Виды архитектур
2. Базы данных
3. Серверные решения для Unity
4. Общие серверные решения

## Виды архитектур
- Монолитная (Monolithic)
- Микросервисная архитектура (Microservices)
- SOA (Web API)
- Event driven architectures
- Serverless (Workflows)
- Акторная модель
- ECS

### Монолитная (Monolithic)
Для небольших проектов, не предполагающих огромные нагрузки, горизонтальное масштабирование. Подходит для админок, внутреннего инструментария, информационных сайтов, CMS, небольшого бизнеса, не интенсивного асинхронного мультиплеера делающего небольшие кешированные запросы на сервер, простой LiveOPS, config getter.

| Подходящий язык: PHP, C#
| Подходящий транспорт: HTTPS over TCP / IP
| Подходящий ответ: Hypertext or JSON
| Подходящая БД: MariaDB, Postgre SQL, MS SQL
| Frameworks: Laravel, Entity Framework (ASP.NET / .NET)

##### Преимущества
- скорость начальной имплементации
- низкая стоимость разработки (на начальных стадиях)
- нет необходимости в сильных разработчиках (на начальных стадиях)

##### Недостатки
- Сложность масштабирования (не удачна для горизонтального масштабирования)
- При разрастании кода, сложно поддерживать и вести парралельную разработку
- 


### Микросервисная архитектура (Microservices)
Для больших проектов, с требованием низких задержек, легким горизонтальным масштабированием. Подходит для высоконагруженных сервисов, LiveOps серверов, интенсивного асинхронного мультиплеера, а также синхронного мультиплеера

| Подходящий язык: C#, Go, Rust, C++, Java
| Подходящий транспорт: TCP / UDP
| Подходящий ответ: JSON, XML, JSON-RPC, gRPC, binary (свое решение) 
| Подходящая БД: Postgre SQL, MS SQL, MongoDB, CockroachDB


##### Преимущества
- Облегченная параллельная разработка
- Лучше подходит под высокие нагрузки
- Возможность писать отдельные сервисы на подходящих для этого технологиях (языках и фреймворках
- Большая отказоустойчивость
- Более подходит для масштабирования

##### Недостатки
- На старте придется потратить больше времени на проектирование, ответить на большее число вопросов.
- Более сложный мониторинг
- Более сложный деплой
- Требует от разработчик скиллсет заточенный на парралельное, ассинхронное и распределенное программирование. (более высокий уровень программирования, а значит и затрат на ЗП)

### SOA (Web API)



## Базы данных

Базы данных делятся по нескольким критериям, по наличию или отсуствию SQL, по расположению (персистентные и / или In-memory), масштабируемости (горизонтальная / вертикальная) и прочим параметрам. Ниже представлен список решений, их плюсы и минусы

### SQL
#### Postgre SQL
Вид:    Объектно - Реляционная
Наличие SQL: Да
Масштабируемость: Вертикальная, выбор лидера
Персистентность: Да
Параллельные запросы: Да (блокировка транзакций, снепшоты)
Репликация: Встроенная
Согласованность данных:
Простота миграций:
Embeded: Нет
in-memory: Нет
Индексы: B-дерево, хэш, R-дерево, GiST, GIN
Язык программирования для хранимых процедур: PL/pgSQL
Вариации / Форки: Значимые отсутствуют

TPS (Transactions Per Seconds): ★★
Документация (Объем / Качество): ★★
Стоимость (Total Cost of Ownership): ★★
	| стоимость лицензии: 
	| стоимость обучения новых специалистов: ★

**Особенности:**


#### MySQL

Вариации / Форки: MariaDB, Percona

#### MariaDB

#### Percona


#### MS SQL


#### CockroachDB


#### Oracle RDBMS (Oracle Database)
in-memory: Есть

DynamoDB

Casandra

### no SQL
#### Mongo DB


## Серверные решения для Unity
- Photon Server (Photon Cloud) (C#)
- Nakama (golang, typescript)
- Playfab (C#)
- SmartFox
- Unity Multiplayer
- Amazon Gamesparks - закрылся и открылся под новым брендом внутри AWS (встроены лямбды, динамоДБ)
- epic online services
- Firebase
- Colyseus https://www.colyseus.io/ (node.js)
- Agones (https://agones.dev/)
- Microsoft Orleans


## Общие серверные решения
- AWS Lambda (serverless)
- Firebase (serverless)
- AWS
- Azure
- Google Cloud

